//////////////////////////////////////
//  AUTHOR:         Marco Cusano    //
//  CREATION DATE:  2019/09/25      //
//  LAST UPDATE:    2019/09/29      //
//  VERSION:        1.0-min         //
//////////////////////////////////////

function jQueryEditable(t){t.attr("editable")?initJQueryEditable(t):t.find('[editable="true"]').each(function(){initJQueryEditable($(this))})}function initJQueryEditable(n){n.attr("contentEditable","true"),n.on("keypress",function(t){13==t.keyCode&&"textarea"!=$(n).attr("data-type")&&($(n).blur(),t.preventDefault())}),n.on("DOMSubtreeModified",function(t){var n={dom:$(this),content:$(this).attr("data-content")||$(this).html(),input:$("#"+$(this).attr("data-input"))||null,type:$(this).attr("data-type")||"text",min:$(this).attr("data-min")||-2147483647,max:$(this).attr("data-max")||2147483647,onChange:$(this).attr("data-onchange")||null},e=$(this).html();if(n.content.length)if("number"==n.type){if(isNaN(e))return $(n.dom).html("0"),!1;if(o<n.min)return $(n.dom).html(n.min),!0;if(o>n.max)return $(n.dom).html(n.max),!0}else if("price"==n.type||"real"==n.type||"double"==n.type||"float"==n.type)for(var i=["0","1","2","3","4","5","6","7","8","9",".",","],a=n.content.length,r=0;a--;){if(","!=(e=n.content.charAt(a))&&"."!=e||r++,1<r)return $(n.dom).html("0.00"),!1;if(jQuery.inArray(e,i)<0)return $(n.dom).html("0.00"),!1;if((o=n.content.replace(",","."))<n.min)return $(n.dom).html(n.min),!1;if(o>n.max)return $(n.dom).html(n.max),!1}else if("email"==n.type){a=n.content.length,r=0;for(var l=0;a--;){"@"==(e=n.content.charAt(a))&&r++,"."==e&&l++}(1!==r||1!==l||n.content.length<5)&&n.input&&$(n.input).val(null)}else if("link"==n.type||"url"==n.type){for(a=n.content.length;a--;){"http"==(e=n.content.charAt(a))&&0}n.input&&($(this).html("https://"),$(n.input).val(null))}try{if(n.input){var o=$(this).html().replace(",",".");$(n.input).val(o)}}catch(t){return console.log("Attached input element not found. Please make sure you specified a valid 'id' in your 'data-input' value."),!1}return n.onChange&&window[n.onChange](1),!0});var t={event:$(this).attr("data-onevent")||null,function:$(this).attr("data-onevent-function")||null};t.event&&t.function&&$(this).on(t.event,function(){window[t.function](0)}),$(this).attr("data-onend")&&window[$(this).attr("data-onend")]}$('[editable="true"]').each(function(){initJQueryEditable($(this))});
